// Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.

package provider

import (
	"context"
	"github.com/conductorone/terraform-provider-conductorone/internal/provider/typeconvert"
	tfTypes "github.com/conductorone/terraform-provider-conductorone/internal/provider/types"
	"github.com/conductorone/terraform-provider-conductorone/internal/sdk/models/operations"
	"github.com/conductorone/terraform-provider-conductorone/internal/sdk/models/shared"
	"github.com/hashicorp/terraform-plugin-framework/diag"
	"github.com/hashicorp/terraform-plugin-framework/types"
)

func (r *VaultResourceModel) RefreshFromSharedVault(ctx context.Context, resp *shared.Vault) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		r.CreatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(resp.CreatedAt))
		r.CredentialExpirationDuration = types.StringPointerValue(resp.CredentialExpirationDuration)
		r.DeletedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(resp.DeletedAt))
		r.Description = types.StringPointerValue(resp.Description)
		r.DisplayName = types.StringPointerValue(resp.DisplayName)
		if resp.GroupAuthzVault == nil {
			r.GroupAuthzVault = nil
		} else {
			r.GroupAuthzVault = &tfTypes.GroupAuthzVault{}
		}
		r.ID = types.StringPointerValue(resp.ID)
		if resp.MagicVault == nil {
			r.MagicVault = nil
		} else {
			r.MagicVault = &tfTypes.MagicVault{}
			r.MagicVault.AllowedViews = types.Int64PointerValue(resp.MagicVault.AllowedViews)
			r.MagicVault.AllowUnauthedViews = types.BoolPointerValue(resp.MagicVault.AllowUnauthedViews)
		}
		r.UpdatedAt = types.StringPointerValue(typeconvert.TimePointerToStringPointer(resp.UpdatedAt))
	}

	return diags
}

func (r *VaultResourceModel) RefreshFromSharedVaultServiceCreateResponse(ctx context.Context, resp *shared.VaultServiceCreateResponse) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		diags.Append(r.RefreshFromSharedVault(ctx, resp.Vault)...)

		if diags.HasError() {
			return diags
		}

	}

	return diags
}

func (r *VaultResourceModel) RefreshFromSharedVaultServiceGetResponse(ctx context.Context, resp *shared.VaultServiceGetResponse) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		diags.Append(r.RefreshFromSharedVault(ctx, resp.Vault)...)

		if diags.HasError() {
			return diags
		}

	}

	return diags
}

func (r *VaultResourceModel) RefreshFromSharedVaultServiceUpdateResponse(ctx context.Context, resp *shared.VaultServiceUpdateResponse) diag.Diagnostics {
	var diags diag.Diagnostics

	if resp != nil {
		diags.Append(r.RefreshFromSharedVault(ctx, resp.Vault)...)

		if diags.HasError() {
			return diags
		}

	}

	return diags
}

func (r *VaultResourceModel) ToOperationsC1APIVaultV1VaultServiceDeleteRequest(ctx context.Context) (*operations.C1APIVaultV1VaultServiceDeleteRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var id string
	id = r.ID.ValueString()

	vaultServiceDeleteRequest, vaultServiceDeleteRequestDiags := r.ToSharedVaultServiceDeleteRequest(ctx)
	diags.Append(vaultServiceDeleteRequestDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := operations.C1APIVaultV1VaultServiceDeleteRequest{
		ID:                        id,
		VaultServiceDeleteRequest: vaultServiceDeleteRequest,
	}

	return &out, diags
}

func (r *VaultResourceModel) ToOperationsC1APIVaultV1VaultServiceGetRequest(ctx context.Context) (*operations.C1APIVaultV1VaultServiceGetRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var id string
	id = r.ID.ValueString()

	out := operations.C1APIVaultV1VaultServiceGetRequest{
		ID: id,
	}

	return &out, diags
}

func (r *VaultResourceModel) ToOperationsC1APIVaultV1VaultServiceUpdateRequest(ctx context.Context) (*operations.C1APIVaultV1VaultServiceUpdateRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	var id string
	id = r.ID.ValueString()

	vaultServiceUpdateRequest, vaultServiceUpdateRequestDiags := r.ToSharedVaultServiceUpdateRequest(ctx)
	diags.Append(vaultServiceUpdateRequestDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := operations.C1APIVaultV1VaultServiceUpdateRequest{
		ID:                        id,
		VaultServiceUpdateRequest: vaultServiceUpdateRequest,
	}

	return &out, diags
}

func (r *VaultResourceModel) ToSharedVaultInput(ctx context.Context) (*shared.VaultInput, diag.Diagnostics) {
	var diags diag.Diagnostics

	credentialExpirationDuration := new(string)
	if !r.CredentialExpirationDuration.IsUnknown() && !r.CredentialExpirationDuration.IsNull() {
		*credentialExpirationDuration = r.CredentialExpirationDuration.ValueString()
	} else {
		credentialExpirationDuration = nil
	}
	description := new(string)
	if !r.Description.IsUnknown() && !r.Description.IsNull() {
		*description = r.Description.ValueString()
	} else {
		description = nil
	}
	displayName := new(string)
	if !r.DisplayName.IsUnknown() && !r.DisplayName.IsNull() {
		*displayName = r.DisplayName.ValueString()
	} else {
		displayName = nil
	}
	var groupAuthzVault *shared.GroupAuthzVault
	if r.GroupAuthzVault != nil {
		groupAuthzVault = &shared.GroupAuthzVault{}
	}
	id := new(string)
	if !r.ID.IsUnknown() && !r.ID.IsNull() {
		*id = r.ID.ValueString()
	} else {
		id = nil
	}
	var magicVault *shared.MagicVault
	if r.MagicVault != nil {
		allowUnauthedViews := new(bool)
		if !r.MagicVault.AllowUnauthedViews.IsUnknown() && !r.MagicVault.AllowUnauthedViews.IsNull() {
			*allowUnauthedViews = r.MagicVault.AllowUnauthedViews.ValueBool()
		} else {
			allowUnauthedViews = nil
		}
		allowedViews := new(int64)
		if !r.MagicVault.AllowedViews.IsUnknown() && !r.MagicVault.AllowedViews.IsNull() {
			*allowedViews = r.MagicVault.AllowedViews.ValueInt64()
		} else {
			allowedViews = nil
		}
		magicVault = &shared.MagicVault{
			AllowUnauthedViews: allowUnauthedViews,
			AllowedViews:       allowedViews,
		}
	}
	out := shared.VaultInput{
		CredentialExpirationDuration: credentialExpirationDuration,
		Description:                  description,
		DisplayName:                  displayName,
		GroupAuthzVault:              groupAuthzVault,
		ID:                           id,
		MagicVault:                   magicVault,
	}

	return &out, diags
}

func (r *VaultResourceModel) ToSharedVaultServiceCreateRequest(ctx context.Context) (*shared.VaultServiceCreateRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	description := new(string)
	if !r.Description.IsUnknown() && !r.Description.IsNull() {
		*description = r.Description.ValueString()
	} else {
		description = nil
	}
	var displayName string
	displayName = r.DisplayName.ValueString()

	var groupAuthzVault *shared.GroupAuthzVault
	if r.GroupAuthzVault != nil {
		groupAuthzVault = &shared.GroupAuthzVault{}
	}
	var magicVault *shared.MagicVault
	if r.MagicVault != nil {
		allowUnauthedViews := new(bool)
		if !r.MagicVault.AllowUnauthedViews.IsUnknown() && !r.MagicVault.AllowUnauthedViews.IsNull() {
			*allowUnauthedViews = r.MagicVault.AllowUnauthedViews.ValueBool()
		} else {
			allowUnauthedViews = nil
		}
		allowedViews := new(int64)
		if !r.MagicVault.AllowedViews.IsUnknown() && !r.MagicVault.AllowedViews.IsNull() {
			*allowedViews = r.MagicVault.AllowedViews.ValueInt64()
		} else {
			allowedViews = nil
		}
		magicVault = &shared.MagicVault{
			AllowUnauthedViews: allowUnauthedViews,
			AllowedViews:       allowedViews,
		}
	}
	var ownerIds []string
	if r.OwnerIds != nil {
		ownerIds = make([]string, 0, len(r.OwnerIds))
		for _, ownerIdsItem := range r.OwnerIds {
			ownerIds = append(ownerIds, ownerIdsItem.ValueString())
		}
	}
	out := shared.VaultServiceCreateRequest{
		Description:     description,
		DisplayName:     displayName,
		GroupAuthzVault: groupAuthzVault,
		MagicVault:      magicVault,
		OwnerIds:        ownerIds,
	}

	return &out, diags
}

func (r *VaultResourceModel) ToSharedVaultServiceDeleteRequest(ctx context.Context) (*shared.VaultServiceDeleteRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	out := shared.VaultServiceDeleteRequest{}

	return &out, diags
}

func (r *VaultResourceModel) ToSharedVaultServiceUpdateRequest(ctx context.Context) (*shared.VaultServiceUpdateRequest, diag.Diagnostics) {
	var diags diag.Diagnostics

	vault, vaultDiags := r.ToSharedVaultInput(ctx)
	diags.Append(vaultDiags...)

	if diags.HasError() {
		return nil, diags
	}

	out := shared.VaultServiceUpdateRequest{
		Vault: vault,
	}

	return &out, diags
}
